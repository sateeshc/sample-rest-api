<?xml version="1.0" encoding="UTF-8"?>
<ruleset xmlns="http://pmd.sourceforge.net/ruleset/2.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="Ruleset for Mule 4" xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0 https://pmd.sourceforge.io/ruleset_2_0_0.xsd">

<description>Default ruleset for PMD</description>

<!--
       <rule name="NoUnderscoresInFieldNames" language="xml" message="Custom fields should not contain underscores." class="net.sourceforge.pmd.lang.xml.rule.DomXPathRule">
              <priority>3</priority>
        <properties>
            <property name="xpath">
                <value><![CDATA[
                 not(matches(//CustomField/fullName/text(), ".*_.*__c"))
                    //CustomField/fullName/text[matches(@Image, ".*_.*__c")]
                ]]></value>
            </property>

        </properties>
    </rule>
-->
       <rule name="FlowNameShouldMatchConvention" language="xml" message="Flows names should match a naming convention" class="net.sourceforge.pmd.lang.rule.XPathRule">
        <properties>
            <property name="version" value="2.0"></property>
            <property name="xpath">
                <value><![CDATA[
                    //mule/flow[not(matches(@name, '^[a-z:\\{}]+(-[a-z]+)*$'))]
                ]]></value>
            </property>
        </properties>
    </rule>
       <rule name="ExcessiveNumberOfFlows" language="xml" message="Configuration files should not have so many flows" class="net.sourceforge.pmd.lang.rule.XPathRule">
        <properties>
            <property name="version" value="2.0"></property>
            <property name="xpath">
                <value><![CDATA[
                    //mule[count(flow) > 2]
                ]]></value>
            </property>
        </properties>
    </rule>
</ruleset>
